var Wizardacious=function(n){function a(i){var a=n("#"+i);n.ajax({url:a.attr("action"),type:"POST",data:a.serialize(),beforeSend:function(){n(a).find(".navigation .wizard-back").attr("disabled",!0)}}).done(function(i){var t=!1,e=n.parseJSON(i);""!=e.errors&&(t=!0),t?(n(a).find(".error-content").show(),n(a).find(".navigation .wizard-back").attr("disabled",!1)):(n(a).find(".success-content").show(),n(a).find(".navigation").hide())}).always(function(){n(a).find(".api-loading-content").hide()}).fail(function(i,t,e){alert(t+" - "+e),n(a).find(".api-loading-content").hide(),n(a).find(".failure-content").show()})}function t(i){var t=n("#"+i+"_submit");return t.length?(a(i),!1):(n("#"+i+"-wizard :input").each(function(i,a){n(a).change(function(){n(this).valid()}),n(a).keyup(function(){n(this).valid()})}),void 0)}function e(a,e){var r=n("#"+a),d="wizard="+a;if("reset"==e){if("disabled"==r.find(".navigation .wizard-back").attr("disabled"))return;if("disabled"==r.find(".navigation .wizard-next").attr("disabled"))return;d+="&reset=1"}else if("prev"==e){if("disabled"==r.find(".navigation .wizard-back").attr("disabled"))return;d+="&nav=prev"}else if("next"==e){if("disabled"==r.find(".navigation .wizard-next").attr("disabled"))return;d+="&nav=next";var o=r.find(":input.required"),f=!o.length||!!o.valid();if(!f){for(i=0;i<o.length;i++)if(!n(o[i]).hasClass("valid")){n(o[i]).focus();break}return!1}}d=d+"&"+r.serialize(),n.ajax({url:"wizard.php",type:"POST",data:d,beforeSend:function(){r.html(""),r.addClass("loading")}}).done(function(i){r.html(i),t(a)}).always(function(){r.removeClass("loading")}).fail(function(){alert("ERROR: Unable to connect.")})}return{action:e,prepare:t,submit:a}}(jQuery);